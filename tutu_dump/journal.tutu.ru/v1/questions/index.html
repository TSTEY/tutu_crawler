<style>
	.tutu-widget-comments { font: 15px/20px Arial; color: #000000; }

	.tutu-widget-comments h2 {
		font-size: 18px;
		line-height: 20px;
		font-weight: bold;
		margin: 0 0 17px 15px;
		padding:0;
	}

	.tutu-widget-comments h3 {
		font-size: 15px;
		line-height: 17px;
		font-weight: bold;
		margin: 0 0 8px 0;
		padding:0;
	}

	.tutu-widget-comments h3._green { color: #3c9c01; }

	.tutu-widget-comments__frame { margin-bottom: 17px; }
	.tutu-widget-comments__frame__door {
		display: inline-block;
		font: 15px Arial;
		text-align: center;
		color: #000000;
		text-shadow: 0 1px 0 rgba(255, 255, 255, 0.6);
		padding: 7px 10px 7px 10px;
		margin-left: 15px;
		border-radius: 4px;
		background: linear-gradient(to bottom, #faf9f7, #f0efeb 50%, #e5e4df 50%, #dedcd4);
		border-left: 1px solid #dadad7;
		border-right: 1px solid #dadad7;
		border-top: 1px solid #f0f0ef;
		border-bottom: 1px solid #d4d4d3;
		cursor: pointer;
	}

	.tutu-widget-comments__frame._open .tutu-widget-comments__form { display: block; }
	.tutu-widget-comments__frame._open .tutu-widget-comments__frame__door { display: none; }

	.tutu-widget-comments__frame._new { margin-bottom: 25px; }
	.tutu-widget-comments__frame._new .tutu-widget-comments__frame__door {
		color: #336699;
		border: 0 none;
		border-bottom: 1px dotted #336699;
		text-shadow: none;
		background: none;
		margin-left: 47px;
		padding: 0;
		border-radius: 0;
	}

	.tutu-widget-comments-form-message__success {
		margin-left: 12px;
		padding: 0 0 5px 35px;
		background: url("//questions.tutu.ru/img/success.svg") no-repeat 0 3px;
		background-size: 27px 27px;
	}


	.tutu-widget-comments__form {
		display: none;
		padding: 8px 15px 0 15px;
		border-radius: 4px;
		background-color: #ffffff;
		box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3);
	}


	.tutu-widget-comments__form__row {
		position: relative;
		margin-bottom: 10px;
	}
	.tutu-widget-comments__form__row._button {
		margin: 20px -15px 0 -15px;
		padding: 24px 15px;
		background: #f3f5da;
		border-bottom-right-radius: 4px;
		border-bottom-left-radius: 4px;
	}

	.tutu-widget-comments__form__row._button._disabled { position: relative; opacity: 0.4; }
	.tutu-widget-comments__form__row._button._disabled:before {
		content: ' ';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
	}

	.tutu-widget-comments__form__row._button input,
	.tutu-widget-comments__form__row__txt {
		display: inline-block;
		vertical-align: middle;
	}

	.tutu-widget-comments__form__row__txt {
		color: #9fa08f;
		margin-left: 10px;
	}

	.tutu-widget-comments__form__row__note {
		position: absolute;
		bottom: 15px;
		left: 196px;
		right: 0;
		width: 51px;
		padding-left: 33px;
		font-size: 11px;
		line-height: 15px;
		color: #9e9e9e;
		background: url("//questions.tutu.ru/img/bg.png") no-repeat 0 6px;
	}

	.tutu-widget-comments__form__row__name {
		font-size: 13px;
		line-height: 15px;
		margin-bottom: 5px;
	}

	.tutu-widget-comments__form__row__field { display: inline-block; position: relative; }

	.tutu-widget-comments__form__field {
		font: 15px Arial;
		color:#000000;
		padding: 5px 10px 3px 10px;
		outline: none;
		border: 1px solid #e9e9e9;
		background: #ffffff;
		border-radius: 4px;
		box-shadow: inset 0 2px 3px 0 rgba(135, 135, 135, 0.25);
		box-sizing: border-box;
	}

	.tutu-widget-comments__form__field._name { width: 180px; }
	.tutu-widget-comments__form__field._email { width: 215px; }

	.tutu-widget-comments__form__row._textarea .tutu-widget-comments__form__row__field { display: block; }
	.tutu-widget-comments__form__row._textarea .tutu-widget-comments__form__field {
		max-width: 410px;
		width: 100%;
		height: 100px;
	}


	.form__field::-webkit-input-placeholder { color:#aaaaaa; }
	.form__field::-moz-placeholder          { color:#aaaaaa; }/* Firefox 19+ */
	.form__field:-ms-input-placeholder      { color:#aaaaaa; }

	input:focus::-webkit-input-placeholder {color: transparent !important;}
	input:focus::-moz-placeholder          {color: transparent !important;}
	input:focus:-ms-input-placeholder      {color: transparent !important;}

	textarea:focus::-webkit-input-placeholder {color: transparent !important;}
	textarea:focus::-moz-placeholder          {color: transparent !important;}
	textarea:focus:-ms-input-placeholder      {color: transparent !important;}

	.tutu-widget-comments__form__button {
		display: inline-block;
		font: 16px Arial;
		text-align: center;
		color: #ffffff;
		text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.15);
		padding: 7px 10px 7px 10px;
		outline: none;
		border-radius: 4px;
		box-shadow: 0 1px 0 0 rgba(255, 255, 255, 0.5);
		background: linear-gradient(to bottom,  #30a2da 0%,#0971b3 25%,#045893 51%,#0665a4 77%,#005889 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
		border: 0 none;
	}


	.tutu-widget-comments__form__row._error { z-index: 1; }

	.tutu-widget-comments__form__row__field__error {
		display: none;
		position: absolute;
		top: 32px;
		left: 0;
		right: 0;
		font-size: 12px;
		line-height: 15px;
		color: #1a1a1a;
		padding: 9px 12px;
		background: #ffe471;
		box-shadow: 0 4px 5px 0 rgba(65, 97, 124, 0.1), 0 4px 11px 1px rgba(65, 97, 124, 0.4), 0 0 1px 1px rgba(65, 97, 124, 0.1);
		box-sizing: border-box;
		border-radius: 4px;
	}

	.tutu-widget-comments__form__row__field__error:before {
		content: ' ';
		position: absolute;
		top: -10px;
		left: 50%;
		width: 0;
		height: 0;
		margin-left: -5px;
		border: 5px solid transparent;
		border-bottom-color: #ffe471;
	}

	.tutu-widget-comments__form__row._error .tutu-widget-comments__form__field {
		border-color: transparent;
		background: #fffce0;
		border-radius: 4px;
		box-shadow: 0 1px 0 0 rgba(255, 255, 255, 0.5), inset 0 1px 4px 0 #ffcd00;
	}

	.tutu-widget-comments__form__row._textarea._error .tutu-widget-comments__form__row__field__error { top: 85px; }

	.tutu-widget-comments__form__argee {
		display: inline-block;
		font-size: 13px;
		line-height: 15px;
	}

	.tutu-widget-comments__form__argee > a { color: #336699; }

	.tutu-widget-comments__form__argee > input {
		display: inline-block;
		vertical-align: top;
		margin: 0 5px 0 0;
		padding: 0;
	}





	.tutu-widget-comments__list { margin-bottom: 17px; padding: 0; }
	.tutu-widget-comments__list li {
		display: block;
		padding: 7px 15px 20px 15px;
		border-radius: 4px;
		border: 1px solid #dddddd;
		margin-bottom: 9px;
		list-style:none;
	}

	.tutu-widget-comments__list li p { margin: 15px 0; font-size: 15px; }
	.tutu-widget-comments__list li a { color: #369; text-decoration: underline; cursor: pointer; }

	.tutu-widget-comments__list__info {
		font-size: 0;
		margin-bottom: 1px;
	}

	.tutu-widget-comments__list__info__item {
		display: inline-block;
		vertical-align: top;
		width: 50%;
		font-size: 15px;
	}

	.tutu-widget-comments__list__info__date { color: #ababab; }
	.tutu-widget-comments__list__info__name { margin-left: 5px; font-weight: bold; }

	.tutu-widget-comments__list__info__item._estimate {
		text-align: right;
		color: #ababab;
	}

	.tutu-widget-comments__list__info__item._estimate span {
		display: inline-block;
		vertical-align: middle;
		margin-left: 9px;
		padding-left: 19px;
		cursor: pointer;
	}

	.tutu-widget-comments__list__info__item._estimate ._plus {
		color: #3c9c01;
		background: url("//questions.tutu.ru/img/plus.svg") no-repeat 0 0;
	}
	.tutu-widget-comments__list__info__item._estimate ._minus {
		color: #c53c0c;
		background: url("//questions.tutu.ru/img/minus.svg") no-repeat 0 5px;
	}

	.tutu-widget-comments__list__info__item._estimate ._disabled {
		opacity: 0.2;
	}

	.tutu-widget-comments__list__answer {
		margin-top: 11px;
		padding: 12px 0 0 20px;
		border-top: 1px solid #dddddd;
	}
	.tutu-widget-comments__list__answer .tutu-widget-comments__list__info__name {
		padding-left: 55px;
		font-weight: normal;
		width: 65px;
		height: 20px;
		background: url("//questions.tutu.ru/img/black_small_text.svg") no-repeat 0 0;
		background-size: contain;
		display: inline-block;
	}

	.tutu-widget-comments__more { text-align: center; }
	.tutu-widget-comments__more._hide { display: none; }
	.tutu-widget-comments__more span {
		display: inline-block;
		font-size: 15px;
		line-height: 29px;
		height: 29px;
		padding: 0 10px;
		color: #356a9f;
		border-radius: 4px;
		border: solid 1px #afc5d9;
		cursor: pointer;
	}

	.tutu-widget-comments__box._noUsefull h3,
	.tutu-widget-comments__box._noUsefull .tutu-widget-comments__list._usefull { display: none; }

	@media (min-width: 370px) {
		.tutu-widget-comments__form__row__note {
			bottom: 4px;
			left: 222px;
			font-size: 13px;
			line-height: 18px;
			width: auto;
		}
	}
</style>

<div class="tutu-widget-comments">
	<h2>–í–æ–ø—Ä–æ—Å—ã, —Å–æ–≤–µ—Ç—ã –∏ –æ—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
		<div id="tutu-widget-comments-form-box" class="tutu-widget-comments__frame _open">
		<div id="tutu-widget-comments-form-door" class="tutu-widget-comments__frame__door">–ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</div>
		<div id="tutu-widget-comments-form-add" class="tutu-widget-comments__form">
			<h3>–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</h3>			<div class="tutu-widget-comments__form__row">
				<div class="tutu-widget-comments__form__row__name">–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?</div>
				<div class="tutu-widget-comments__form__row__field">
					<input type="text" name="name" id="tutu-widget-comments-form-add-name" value=""
						   class="tutu-widget-comments__form__field _name"/>
					<div class="tutu-widget-comments__form__row__field__error js-error-message"></div>
				</div>
			</div>
							<div class="tutu-widget-comments__form__row">
					<div class="tutu-widget-comments__form__row__name">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</div>
					<div class="tutu-widget-comments__form__row__field">
						<input type="text" name="email" id="tutu-widget-comments-form-add-email" value=""
							class="tutu-widget-comments__form__field _email"/>
						<div class="tutu-widget-comments__form__row__field__error js-error-message"></div>
					</div>
					<div class="tutu-widget-comments__form__row__note">–º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</div>
				</div>
						<div class="tutu-widget-comments__form__row _textarea">
				<div class="tutu-widget-comments__form__row__name">–í–∞—à –≤–æ–ø—Ä–æ—Å, —Å–æ–≤–µ—Ç –∏–ª–∏ –æ—Ç–∑—ã–≤</div>
				<div class="tutu-widget-comments__form__row__field">
                <textarea name="comment" id="tutu-widget-comments-form-add-comment" cols="30" rows="10"
						  placeholder=""
						  class="tutu-widget-comments__form__field"></textarea>
					<div class="tutu-widget-comments__form__row__field__error js-error-message"></div>
				</div>
			</div>
			<div class="tutu-widget-comments__form__row">
				<label class="tutu-widget-comments__form__argee">
					<input type="checkbox" value="" name="isAgree" id="tutu-widget-comments-form-add-agree" />
					–Ø –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω –∏ —Å–æ–≥–ª–∞—Å–µ–Ω —Å <a href="https://www.tutu.ru/poezda/content/rules_feedback_short/" id="tutu-widget-comments-form-add-agreement-link" target="_blank">–ø—Ä–∞–≤–∏–ª–∞–º–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</a> –∏ –¥–∞—é <a href="https://www.tutu.ru/2read/legal_information/agreement_geography/" target="_blank">—Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –º–æ–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</a>
				</label>
			</div>
			<div id="tutu-widget-comments-form-button" class="tutu-widget-comments__form__row _button _disabled">
				<input type="button" value="–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å" id="tutu-widget-comments-form-submit" class="tutu-widget-comments__form__button" disabled/>
				<div class="tutu-widget-comments__form__row__txt">–°–ø–∞—Å–∏–±–æ! –í–∞—à –≤–æ–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é. –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–Ω –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.</div>
			</div>
		</div>
	</div>
		<div id="tutu-widget-comments-frame" class="tutu-widget-comments__box _noUsefull">
		<ul class="tutu-widget-comments__list" id="tutu-widget-comments-list">
                            <li id="GgPaiZQBA-7zXN3uStD0">
    <div class="tutu-widget-comments__list__info">
        <div class="tutu-widget-comments__list__info__item _inf">
            <span class="tutu-widget-comments__list__info__date">21.01.2025 20:12</span>
            <span class="tutu-widget-comments__list__info__name">–ù–∞—Ç–∞–ª—å—è:</span>
        </div>
        <div class="tutu-widget-comments__list__info__item _estimate" data-id="GgPaiZQBA-7zXN3uStD0">
            –ü–æ–ª–µ–∑–Ω–æ—Å—Ç—å:
            <span class="_plus js-comment-plus " data-type="p">0</span>
            <span class="_minus js-comment-minus " data-type="m">1</span>
        </div>
    </div>
	<p>–•–æ—á—É –ø–æ—Å–µ—Ç–∏—Ç—å –ö–∏—Ç–∞–π. –ù–æ —è –ø–µ–Ω—Å–∏–æ–Ω–µ—Ä–∫–∞ –∏ –º–Ω–µ 62 –≥–æ–¥–∞.–∞ –µ—â—ë —è –Ω–µ –∑–Ω–∞—é –Ω–∏ –∫–∏—Ç–∞–π—Å–∫–∏–π –Ω–∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π. –ü–æ—ç—Ç–æ–º—É –º–Ω–µ —Å–ª–æ–∂–Ω–æ –±—É–¥–µ—Ç –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω—ã.... –ù–æ, –∂–µ–ª–∞–Ω–∏–µ –µ—Å—Ç—å.<br />
–ü–æ—ç—Ç–æ–º—É, –º–æ–≥–ª–∏ –±—ã –≤—ã –ø–æ–¥–æ–±—Ä–∞—Ç—å –¥–ª—è –º–µ–Ω—è —Ç—É—Ä –≤ –ö–∏—Ç–∞–π –Ω–∞ 10 –¥–Ω–µ–π.<br />
–ú–æ–∂–Ω–æ –∏ –Ω–∞ –ø–æ–µ–∑–¥–µ. –ñ–∏–≤—É —è –≤ —Å–∞—Ä–∞—Ç–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏.</p>
            <div class="tutu-widget-comments__list__answer">
            <div class="tutu-widget-comments__list__info">
                <div class="tutu-widget-comments__list__info__item _inf">
                    <span class="tutu-widget-comments__list__info__date">23.01.2025 16:16</span>
                    <span class="tutu-widget-comments__list__info__name">:</span>
                </div>
            </div>
			<p><p>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –ù–∞—Ç–∞–ª—å—è! <a href="https://tours.tutu.ru/">–ü–æ–¥–æ–±—Ä–∞—Ç—å —Ç—É—Ä –º–æ–∂–Ω–æ —É –Ω–∞—Å –≤–æ—Ç —Ç—É—Ç.</a></p></p>
        </div>
    </li>
                            <li id="MraV8JEB54bRyjiXZCLq">
    <div class="tutu-widget-comments__list__info">
        <div class="tutu-widget-comments__list__info__item _inf">
            <span class="tutu-widget-comments__list__info__date">14.09.2024 15:50</span>
            <span class="tutu-widget-comments__list__info__name">–ê–Ω–∂–µ–ª–∏–∫–∞:</span>
        </div>
        <div class="tutu-widget-comments__list__info__item _estimate" data-id="MraV8JEB54bRyjiXZCLq">
            –ü–æ–ª–µ–∑–Ω–æ—Å—Ç—å:
            <span class="_plus js-comment-plus " data-type="p">0</span>
            <span class="_minus js-comment-minus " data-type="m">0</span>
        </div>
    </div>
	<p>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ù–∏ —Ä–∞–∑—É –Ω–µ –±—ã–ª–∞ –≤ –ö–∏—Ç–∞–µ. –û—á–µ–Ω—å —Ö–æ—á—É –ø–æ–µ—Ö–∞—Ç—å. –ú–µ–Ω—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∏ —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –æ—Ç–¥—ã—Ö)<br />
–ó–∞–Ω–∏–º–∞—é—Å—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å—é, –∏–∑—É—á–∞—é —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏. –ü–æ–º–æ–≥–∏—Ç–µ –≤—ã–±—Ä–∞—Ç—å –º–µ—Å—Ç–æ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—á–µ–Ω—å —Ö–æ—á–µ—Ç—Å—è –≤—Å–µ —É—Å–ø–µ—Ç—å –∏ —Å–æ–≤–º–µ—Å—Ç–∏—Ç—å –ø—Ä–∏—è—Ç–Ω–æ–µ –∏ –ø–æ–ª–µ–∑–Ω–æ–µ üôè</p>
            <div class="tutu-widget-comments__list__answer">
            <div class="tutu-widget-comments__list__info">
                <div class="tutu-widget-comments__list__info__item _inf">
                    <span class="tutu-widget-comments__list__info__date">17.09.2024 18:49</span>
                    <span class="tutu-widget-comments__list__info__name">:</span>
                </div>
            </div>
			<p><p>–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–¥–∞–π—Ç–µ –µ–≥–æ –≤ <a href="https://t.me/joinchat/U3UiEqFGpzw_r6rS">—Ç–µ–ª–µ–≥—Ä–∞–º-—á–∞—Ç–µ &laquo;–¢—É—Ç—É&raquo;</a>, —Ç–∞–º –º—ã —Å–æ–±—Ä–∞–ª–∏ –º–Ω–æ–≥–æ –æ–ø—ã—Ç–Ω—ã—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤. –£–≤–µ—Ä–µ–Ω—ã, –≤–∞–º –ø–æ–¥—Å–∫–∞–∂—É—Ç.</p></p>
        </div>
    </li>
                            <li id="PqvD9o8BWrBRUObscm2d">
    <div class="tutu-widget-comments__list__info">
        <div class="tutu-widget-comments__list__info__item _inf">
            <span class="tutu-widget-comments__list__info__date">08.06.2024 10:32</span>
            <span class="tutu-widget-comments__list__info__name">–ù–∏–∫–æ–ª–∞–π:</span>
        </div>
        <div class="tutu-widget-comments__list__info__item _estimate" data-id="PqvD9o8BWrBRUObscm2d">
            –ü–æ–ª–µ–∑–Ω–æ—Å—Ç—å:
            <span class="_plus js-comment-plus " data-type="p">2</span>
            <span class="_minus js-comment-minus " data-type="m">1</span>
        </div>
    </div>
	<p>–ö–∞–∫–∞—è –ø–æ–≥–æ–¥–∞ –≤ –°–∞–Ω—å–µ?</p>
            <div class="tutu-widget-comments__list__answer">
            <div class="tutu-widget-comments__list__info">
                <div class="tutu-widget-comments__list__info__item _inf">
                    <span class="tutu-widget-comments__list__info__date">10.06.2024 15:58</span>
                    <span class="tutu-widget-comments__list__info__name">:</span>
                </div>
            </div>
			<p><p>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –ù–∏–∫–æ–ª–∞–π! –ù–∞ –ª–µ—Ç–Ω–∏–µ –º–µ—Å—è—Ü—ã –≤ –°–∞–Ω—å–µ –ø–æ–≥–æ–¥–∞ —Ç—ë–ø–ª–∞—è, –¥–Ω—ë–º +31&deg;–°</p></p>
        </div>
    </li>
                            <li id="zSuXOm4BIMaVL3oru8Ju">
    <div class="tutu-widget-comments__list__info">
        <div class="tutu-widget-comments__list__info__item _inf">
            <span class="tutu-widget-comments__list__info__date">29.08.2018 04:34</span>
            <span class="tutu-widget-comments__list__info__name">–≠–¥—É–∞—Ä–¥:</span>
        </div>
        <div class="tutu-widget-comments__list__info__item _estimate" data-id="zSuXOm4BIMaVL3oru8Ju">
            –ü–æ–ª–µ–∑–Ω–æ—Å—Ç—å:
            <span class="_plus js-comment-plus " data-type="p">7</span>
            <span class="_minus js-comment-minus " data-type="m">6</span>
        </div>
    </div>
	<p>–ü–æ—Å–º–æ—Ç—Ä–µ–ª —Ü–µ–Ω—É –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ–Ω—Ç—è–±—Ä—å-–æ–∫—Ç—è–±—Ä—å —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ –∏–∑ –ú–æ—Å–∫–≤—ã –¥–æ –®–≠–ù–¨–Ø–ñ–≠–ù–Ø, –æ–Ω–∞ –≤ —Ä–µ–∫–ª–∞–º–µ –≥–æ—Ä–∞–∑–¥–æ –Ω–∏–∂–µ, —á–µ–º –≤ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, -–æ–±–∏–¥–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, –∂–µ–ª–∞–Ω–∏–µ —Å—Ä–∞–∑—É –∂–µ –ª–µ—Ç–µ—Ç—å –æ—Ç–ø–∞–¥–∞–µ—Ç...</p>
            <div class="tutu-widget-comments__list__answer">
            <div class="tutu-widget-comments__list__info">
                <div class="tutu-widget-comments__list__info__item _inf">
                    <span class="tutu-widget-comments__list__info__date">31.08.2018 16:20</span>
                    <span class="tutu-widget-comments__list__info__name">:</span>
                </div>
            </div>
			<p>–≠–¥—É–∞—Ä–¥, –∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! <br />
–í —Å—Ç–∞—Ç—å–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã —Ü–µ–Ω—ã –∏–∑ –ú–æ—Å–∫–≤—ã –¥–æ –£—Ä—É–º—á–∏. –®–µ–Ω—å—á–∂–µ–Ω—å ‚Äî –º–µ–Ω–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –∞ –≤—Å–µ –∞–≤–∏–∞—Ä–µ–π—Å—ã –∏–∑ –ú–æ—Å–∫–≤—ã –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—Ç—Å—è —Å –ø–µ—Ä–µ—Å–∞–¥–∫–æ–π, –ø–æ—ç—Ç–æ–º—É —Å—Ç–æ–∏–º–æ—Å—Ç—å –±–∏–ª–µ—Ç–æ–≤ –≤—ã—à–µ. –ü—Ä–∏ –ø–æ–¥–±–æ—Ä–µ –∞–≤–∏–∞–±–∏–ª–µ—Ç–∞ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ü–µ–Ω—ã –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ –¥–∞—Ç—ã –∏ –≤—ã–±—Ä–∞—Ç—å –±–æ–ª–µ–µ –≤—ã–≥–æ–¥–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è. –¢–∞–∫–∂–µ —á—Ç–æ–±—ã –∫—É–ø–∏—Ç—å –±–∏–ª–µ—Ç—ã –¥–µ—à–µ–≤–æ, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø—Ä–∏–æ–±—Ä–µ—Ç–∞—Ç—å –∏—Ö –∑–∞—Ä–∞–Ω–µ–µ ‚Äî –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —á–µ–º –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –ø–æ–ª–µ—Ç–∞, —Ç–µ–º –Ω–∏–∂–µ —Ü–µ–Ω–∞.</p>
        </div>
    </li>
            		</ul>
			<div id="tutu-widget-comments-more" data-page="1" class="tutu-widget-comments__more"><span>–ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ</span></div>
	</div>
</div>

<script>
	(function() {
		var contentOrigin = "geo_questions",
			pageUrl = "/geo/strana/china/",
			host = "questions.tutu.ru",
			recordsOnPage = 20		;

		var widget = {

			api: function(type, url, data, callback, failback) {

				if (typeof callback != "function") {
					return;
				}
				if (typeof failback != "function") {
					return;
				}

				var prefix = "";
				if (location.protocol == 'https:') {
					prefix = 's';
				}

				var xmlhttp = new XMLHttpRequest();

				xmlhttp.open(type, "http" + prefix + "://" + host + url);
				xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
				xmlhttp.withCredentials = true;
				xmlhttp.send(JSON.stringify(data));

				xmlhttp.onreadystatechange = function() {
					if (xmlhttp.readyState == 4) {

						if(xmlhttp.status == 200 || xmlhttp.status == 201) {
							var response = JSON.parse(xmlhttp.responseText);
							if (response.success) {
								callback(response);
							} else {
								failback({ status: 400, error: response.errors});
							}

						} else {
							failback({ status: xmlhttp.status, error: JSON.parse(xmlhttp.responseText)});
						}
					}
				};

			},

			sendComment: function(){
				var widget = this,

					formBox = document.getElementById("tutu-widget-comments-form-box"),
					formDoor = document.getElementById("tutu-widget-comments-form-door"),
					buttonBox = document.getElementById("tutu-widget-comments-form-button"),
					buttonSubmit = document.getElementById("tutu-widget-comments-form-submit"),

					isAgree = document.getElementById("tutu-widget-comments-form-add-agree"),
                    isAgreementLink = document.getElementById("tutu-widget-comments-form-add-agreement-link"),

					messageSuccess = document.createElement('div'),
					messageError
				;

				if(isAgree !== null) {
					isAgree.addEventListener('change', function(){

						if (this.checked) {
							buttonBox.classList.remove("_disabled");
							buttonSubmit.disabled = false;
						} else {
							buttonBox.classList.add("_disabled");
							buttonSubmit.disabled = true;
						}
					});
				}

				if(buttonSubmit !== null) {
					buttonSubmit.addEventListener("click", function(event) {
						var fieldsForm = {
								user_name:  document.getElementById("tutu-widget-comments-form-add-name"),
								user_email: document.getElementById("tutu-widget-comments-form-add-email"),
								comment: document.getElementById("tutu-widget-comments-form-add-comment"),
                                agreement_link: document.getElementById("tutu-widget-comments-form-add-agreement-link")
							},

							data = {
								userName: fieldsForm.user_name.value,
								userEmail: fieldsForm.user_email !== null ? fieldsForm.user_email.value : '',
								questionText: fieldsForm.comment.value,
                                agreementLink: fieldsForm.agreement_link.getAttribute('href'),
								pageUrl: pageUrl
							}
						;

						function showError(row, text, isView) {
							row.classList.add("_error");
							messageError = row.getElementsByClassName("js-error-message");
							messageError[0].innerHTML = text;
							messageError[0].style.display = isView ? 'block' : 'none';
						}

						buttonBox.classList.add("_disabled");

						if (fieldsForm.user_name.value && fieldsForm.comment.value) {
							widget.api("POST", "/front/"+contentOrigin, data, function(response){
								var answer = "<b>–°–ø–∞—Å–∏–±–æ! –í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.</b><br />–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–Ω —Å—Ç–∞–Ω–µ—Ç –≤–∏–¥–µ–Ω –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º."; 
								// if(!!fieldsForm.user_email.value) {
								// 	answer+= '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–≤–µ—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø—Ä–∏–¥–µ—Ç –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é —ç–ª. –ø–æ—á—Ç—É.';
								// }
								
								fieldsForm.user_name.value = "";
								fieldsForm.user_email.value = "";
								fieldsForm.comment.value = "";

								formBox.classList.remove("_open");
								formBox.classList.add("_new");
								formDoor.innerHTML = "–ù–∞–ø–∏—Å–∞—Ç—å –µ—â–µ –æ–¥–∏–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π";

								messageSuccess.id = "tutu-widget-comments-form-message-success";
								messageSuccess.className = "tutu-widget-comments-form-message__success";
								messageSuccess.innerHTML = answer;
								
								formBox.insertBefore(messageSuccess, formBox.firstChild);

								buttonBox.classList.remove("_disabled");

							}, function(error){
								var errorText = "",
									isErrorView = true,
									textErrors = {
										no_links: "–£–∫–∞–∑–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –≤ —Ç–µ–∫—Å—Ç–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ",
										email_not_valid: "–ù–µ –≤–∞–ª–∏–¥–Ω—ã–π email",
										comment_too_long: "–¢–µ–∫—Å—Ç —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π",
										unknown: "–ù–µ–∏–∑–≤–µ—Ç—Å–Ω–∞—è –æ—à–∏–±–∫–∞"
									}
								;

								if (error.status == 400 ) {

									for (var prop in error.error) {
										var list = error.error[prop];

										errorText = "";

										for (var field in list) {
											if (textErrors[list[field]].length) {
												errorText += textErrors[list[field]] + "<br />";
											} else {
												errorText += field + ":" + textErrors[unknown] + "<br />";
											}

										}
										showError(fieldsForm[field].parentNode.parentNode, errorText, isErrorView);
										isErrorView = false;
									}


								} else {
									console.log (error);
								}

							});

						} else {

							if (!fieldsForm.user_name.value) {
								showError(fieldsForm.user_name.parentNode.parentNode, "–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ—Å—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞", true);
							}

							if (!fieldsForm.comment.value) {
								showError(fieldsForm.comment.parentNode.parentNode, "–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ", !!name.value);
							}

						}

						event.preventDefault();

					});
				}
			},

			fieldsFocus: function(){
				var fields = document.getElementsByClassName("tutu-widget-comments__form__field");

				function hideError() {
					var curField = this,
						fieldRow = curField.parentNode.parentNode,
						errorMessage = fieldRow.getElementsByClassName("js-error-message")
					;

					if (fieldRow.classList.contains('_error')) {

						fieldRow.classList.remove("_error");
						errorMessage[0].style.display = 'none';
						errorMessage[0].innerHTML = "";
					}

				}

				for (var i = 0; i < fields.length; i++) {
					fields[i].addEventListener('focus', hideError, false);
				}
			},

			fieldsBlur: function(){
				var fields = document.getElementsByClassName("tutu-widget-comments__form__field"),
					buttonBox = document.getElementById("tutu-widget-comments-form-button"),
					isAgree = document.getElementById("tutu-widget-comments-form-add-agree")
				;


				function viewNextError() {
					var rowsError = document.getElementsByClassName("tutu-widget-comments__form__row _error");

					if (rowsError.length) {
						errorMessage = rowsError[0].getElementsByClassName("js-error-message");
						errorMessage[0].style.display = 'block';

					} else if (buttonBox.classList.contains('_disabled') && isAgree.checked) {
						buttonBox.classList.remove("_disabled");
					}

				}


				for (var i = 0; i < fields.length; i++) {
					fields[i].addEventListener('blur', viewNextError, false);
				}
			},

			dateDateConvert: function(date){
				date = new Date(date);

				var day = date.getDate(),
					month = date.getMonth(),  //0 - —è–Ω–≤–∞—Ä—å; 11 - –¥–µ–∫–∞–±—Ä—å
					year = date.getFullYear(),
					hours   = date.getHours(),
					minutes = date.getMinutes(),

					dateFormat
				;


				day = (day < 10) ? '0' + day : day;
				month = (month < 9) ? '0' + (month + 1) : (month + 1);

				hours   = (hours < 10)   ? ('0' + hours)   : (hours);
				minutes = (minutes < 10) ? ('0' + minutes) : (minutes);

				dateFormat = day + "." + month + "." + year + " " + hours + ":" + minutes;

				return dateFormat;
			},


			votes: function(obj) {
				var widget = this,

					votesPlus = obj ? obj.getElementsByClassName("js-comment-plus") : document.getElementsByClassName("js-comment-plus"),
					votesMinus = obj ? obj.getElementsByClassName("js-comment-minus") : document.getElementsByClassName("js-comment-minus"),

					urlBase = "/front/" + contentOrigin + "/like/"
				;


				function changeVote(commentId, block, url, isDisabled) {
					var parentBox = block.parentNode,
						minusVote = parentBox.getElementsByClassName("js-comment-minus")[0],
						plusVote = parentBox.getElementsByClassName("js-comment-plus")[0]
					;

					widget.api("POST", url, null, function(response){
						plusVote.innerHTML = response.likesCount;
						minusVote.innerHTML = response.dislikesCount;
						if (isDisabled) {
							plusVote.classList.add("_disabled");
							minusVote.classList.add("_disabled");
						}
						else {
							plusVote.classList.remove("_disabled");
							minusVote.classList.remove("_disabled");
						}
					}, function(error){
						console.log(error);
					});

				}

				function sendVote() {
					var type = this.getAttribute('data-type'),
						commentId = this.parentNode.getAttribute('data-id'),
						url = urlBase + commentId + "/";

					if (this.classList.contains('_disabled')) {
						url += (type == 'p') ? "undo_like" : "undo_dislike";
						changeVote(commentId, this, url, false);
					} else {
						url += (type == 'p') ? "like" : "dislike";
						changeVote(commentId, this, url, true);
					}
				}


				for (var i = 0; i < votesPlus.length; i++) {
					votesPlus[i].addEventListener('click', sendVote, false);
					votesMinus[i].addEventListener('click', sendVote, false);
				}
			},

			showForm: function(){
				var door = document.getElementById("tutu-widget-comments-form-door");
				if(door !== null) {
					door.addEventListener("click", function() {
						var box = this.parentNode,
							messageSuccess = document.getElementById("tutu-widget-comments-form-message-success");
						;

						if (box.classList.contains('_new')) {
							box.classList.remove("_new");
						}

						if (messageSuccess) {
							box.removeChild(messageSuccess);
						}

						box.classList.add("_open");
					});
				}
			},

			getComments: function(){
				var widget = this,
					moreButton = document.getElementById("tutu-widget-comments-more"),
					listBox = document.getElementById("tutu-widget-comments-frame"),
					listBoxLi = listBox.getElementsByTagName('li'),

					nextList = [],
					hasRecordsAfterNextList = false;
				;


				function nextPage(page) {
					widget.api("GET", "/front/"+contentOrigin+"/more?page_url=" + pageUrl + "&page=" + page, null, function(response){
						nextList = response.items;
						hasRecordsAfterNextList = response.hasMoreRecords;
					}, function(error){
						moreButton.classList.add("_hide");
					});

				}

				if (listBoxLi.length < recordsOnPage) {
					moreButton.classList.add("_hide");
				} else {
					nextPage("2");
				}

				moreButton.addEventListener("click", function() {
					var button = this,
						curPage = +button.getAttribute('data-page')
					;


					curPage++;
					button.dataset.page = curPage;
					widget.viewComments(nextList);

					if (hasRecordsAfterNextList) {
						curPage++;
						nextPage(curPage);
					} else {
						moreButton.classList.add("_hide");
					}
				});
			},

			viewComments: function(list){
				var widget = this,
					ulMain = document.getElementById("tutu-widget-comments-list"),
					ulUsefull = document.getElementById("tutu-widget-comments-list-usefull")
				;


				list.forEach(function(item, i, list) {
					var li = document.createElement('li'),
						date = widget.dateDateConvert(item.createdAt),
						html = "",
						likesAreDisabledClass = item.currentUserHasLikedThis ? '_disabled' : '';
					;


					html = "<div class='tutu-widget-comments__list__info'>" +
						"<div class='tutu-widget-comments__list__info__item _inf'>" +
						"<span class='tutu-widget-comments__list__info__date'>"+ date +"</span>" +
						"<span class='tutu-widget-comments__list__info__name'>" + item.userName + ":</span>" +
						"</div>" +
						"<div class='tutu-widget-comments__list__info__item _estimate' data-id='"+ item.id +"'>–ü–æ–ª–µ–∑–Ω–æ—Å—Ç—å: " +
						"<span class='_plus js-comment-plus "+ likesAreDisabledClass +"' data-type='p'>" + item.likesCount + "</span>" +
						"<span class='_minus js-comment-minus "+ likesAreDisabledClass +"' data-type='m'>"+ item.dislikesCount +"</span>" +
						"</div>" +
						"</div>" + item.text
					;

					if (item.answerText) {

						date = widget.dateDateConvert(item.answeredAt);

						html += "<div class='tutu-widget-comments__list__answer'>"+
							"<div class='tutu-widget-comments__list__info'>" +
							"<div class='tutu-widget-comments__list__info__item _inf'>" +
							"<span class='tutu-widget-comments__list__info__date'>"+ date +"</span>" +
							"<span class='tutu-widget-comments__list__info__name'>–¢—É—Ç—É.—Ä—É:</span>" +
							"</div>" +
							"</div>" + item.answerText +
							"</div>"
						;
					}


					li.innerHTML = html;

					if (item.is_useful) {
						ulUsefull.appendChild(li); //–¥–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω–µ—Ü –ø–æ–ª–µ–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞

					} else {
						ulMain.appendChild(li); //–¥–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω–µ—Ü –æ–±—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
					}

					widget.votes(li);

				});

			}

		};


		widget.sendComment();
		widget.votes();
		widget.showForm();
		widget.fieldsFocus();
		widget.fieldsBlur();
		widget.getComments();

	})();
</script>